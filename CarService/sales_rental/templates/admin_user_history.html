{% extends "admin_base.html" %}
{% block content %}
<h1>History for {{ user.username }}</h1>

<div class="history-section">
    {% if sales.exists %}
    <h2>Sales History</h2>
    <table>
        <thead>
            <tr>
                <th>Car</th>
                <th>Sale Date</th>
                <th>Amount</th>
            </tr>
        </thead>
        <tbody>
            {% for sale in sales %}
            <tr>
                <td>{{ sale.car.make }} {{ sale.car.model }}</td>
                <td>{{ sale.sale_date|date:"Y-m-d H:i" }}</td>
                <td>Rs. {{ sale.amount|floatformat:2 }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% endif %}
</div>

<div class="history-section">
    {% if rentals.exists %}
    <h2>Rental History</h2>
    <table>
        <thead>
            <tr>
                <th>Car</th>
                <th>Start Date</th>
                <th>End Date</th>
                <th>Amount</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody>
            {% for rental in rentals %}
            <tr>
                <td>{{ rental.car.make }} {{ rental.car.model }}</td>
                <td>{{ rental.rental_start_date|date:"Y-m-d H:i" }}</td>
                <td>{{ rental.rental_end_date|date:"Y-m-d H:i" }}</td>
                <td>Rs. {{ rental.amount|floatformat:2 }}</td>
                <td>{{ rental.is_active|yesno:"Active,Inactive" }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% endif %}
</div>
{% endblock %}

